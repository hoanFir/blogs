### 一、内存检测

如何检测我们的内存占用？首先可以通过 chrome 中 Memory 来进行内存检测及分析。


### 二、垃圾回收机制

JavaScript 是一种拥有**自动垃圾回收**的高级语言，往往拥有这种功能的语言都拥有相对应的虚拟机，如 Java 的jvm，C# 的clr，PHP 的zend，这些虚拟机实现了代码解析、内存管理和自动垃圾回收等功能，而像 C 或 C++ 这种没有虚拟机的语言，需要手动管理内存，但是优势就是编译后可以直接运行而无需虚拟机。

Javascript 的执行环境会负责管理代码执行过程中使用的内存，开发人员不用关心内存使用问题，所需内存的分配以及无用内存的回收完全实现来自动管理。

这种垃圾收集(GC)策略，其原理其实很简单：**周期性地找出不再继续使用的变量，然后释放其占用的内存**。垃圾收集器，必须跟踪哪个变量有用，哪个变量没用，对于不再有用的变量打上标记，以备将来收回其占用的内存，用于标识无用变量的策略可能因实现而异，但具体到浏览器，通常有两种策略，即**标记清除法（mark-and-sweep）**，和**引用计数法（reference-counting）**。


>>> 1. 标记清除法



>>> 2. 引用计数法




最后要知道，**JavaScript 垃圾收集器没有暴露任何接口，因此不能强迫进行垃圾回收，也无法干预内存管理**。


### 三、NodeJS内存管理和垃圾回收机制

对于前端开发，垃圾回收机制了解的不用很多，但对于运行于服务器上的NodeJS，就有必要深入研究和总结运用了。

因为，在浏览器中，V8引擎一个实例的生命周期不会很长，一个页面往往过不久就会被关闭，在关闭页面时内存都会被释放。如果不幸发生内存泄露等问题，仅仅会影响到一个终端用户，而且刷新就行了。因此几乎没有太多管理的必要。但如果是在服务器端，就需要关注内存问题了，因为服务器端对资源的敏感性是很高的，一旦业务规模增大，小小的内存泄漏会造成服务器瘫痪。所以现在如果要在服务器端进行JavaScript开发就需要熟悉v8的内存管理模式和自动垃圾回收机制了。

...
