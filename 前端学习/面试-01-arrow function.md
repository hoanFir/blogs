ðŸ¾ arrow function

ðŸ•˜ 2019.11.07 ç”± hoanfirst ç¼–è¾‘

### ä¸€ã€ç®­å¤´å‡½æ•°ç¬¬ä¸€ä¸ªç”¨å¤„æ˜¯ä½¿å¾—è¡¨è¾¾æ›´ä¸ºç®€æ´

```javascript

var foo = () => 7;
var foo = param => param+1;
var foo = (param1, param2) => param1+param2;
var foo = id => ({ id: id });

var full = ({first, last}) => first+''+last; //ç»“åˆè§£æž„èµ‹å€¼
const person = { first: xing, last: ming };
full(person);

[1, 2, 3].reduce((total, item)=> { total += item }); //ç®€åŒ–å›žè°ƒå‡½æ•°
[1, 2, 4].map(x => x*x);
var result = [3, 2, 1].sort((a, b) => a-b);

const numbers = (...nums) => nums; //ç»“åˆrestè¿ç®—ç¬¦
numbers(1, 2, 3);
const headAndTail = (head, ...tail) => [head, tail];
headAndTail(1, 2, 3);

```


### ç®­å¤´å‡½æ•°çš„ç¬¬äºŒä¸ªæ˜¯è§£å†³thisæŒ‡å‘é—®é¢˜

åœ¨æ²¡æœ‰ç®­å¤´å‡½æ•°ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰ä¸€ç§åœºæ™¯ï¼Œå³ç”¨const that = this;æ¥è§£å†³å†…éƒ¨å‡½æ•°thisçš„æŒ‡å‘é—®é¢˜ã€‚

è€Œç®­å¤´å‡½æ•°è§£å†³äº†ä¸Šè¿°é—®é¢˜ï¼Œå³å®Œå…¨ä¿®å¤äº†thisçš„æŒ‡å‘ï¼Œthisæ€»æ˜¯æŒ‡å‘è¯æ³•ä½œç”¨åŸŸï¼Œä¹Ÿå°±æ˜¯å®šä¹‰æ—¶æ‰€å¤„çš„ä½œç”¨åŸŸã€‚

```javascript

var handler = { //thiså›ºå®šåŒ–+å°è£…å›žè°ƒå‡½æ•°

  id: '12';

  init: function() {
    document.addEventListener('click', 
      event => this.dosth(e.type), false); //thisæ€»æŒ‡å‘handlerå¯¹è±¡ï¼Œå¦åˆ™å›žæŽ‰å‡½æ•°åœ¨è¿è¡Œæ—¶æŒ‡å‘çš„æ˜¯documentå¯¹è±¡
  },

  dosth: function(type) {
    console.log("handling"+type+' for '+this.id);
  }
}

```

### ä½¿ç”¨æ³¨æ„

1. ç®­å¤´å‡½æ•°ä½“å†…çš„thiså¯¹è±¡æŒ‡å‘çš„æ˜¯å®šä¹‰æ—¶æ‰€åœ¨çš„å¯¹è±¡ï¼Œå› ä¸ºå·²ç»æŒ‰ç…§è¯æ³•ä½œç”¨åŸŸç»‘å®šäº†ï¼Œæ‰€ä»¥ä¸æ˜¯æ‰§è¡Œæ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸã€‚

2. å› ä¸ºç®­å¤´å‡½æ•°thisæŒ‡å‘æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥ç”¨call()æˆ–è€…apply()è°ƒç”¨ç®­å¤´å‡½æ•°æ—¶ï¼Œæ— æ³•å¯¹thisè¿›è¡Œç»‘å®šï¼Œå³ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼šæŒ‡å‘å¤–éƒ¨å‡½æ•°çš„thisã€‚

3. ç®­å¤´å‡½æ•°æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œä¸å¯ä»¥ä½œä¸ºæž„é€ å‡½æ•°ï¼Œå³ä¸èƒ½é€šè¿‡newè°ƒç”¨ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚

4. ç®­å¤´å‡½æ•°ä½“å†…ä½¿ç”¨argumentså¯¹è±¡æ—¶èŽ·å–åˆ°çš„æ˜¯å¤–éƒ¨å‡½æ•°çš„argumentsï¼Œå› ä¸ºç®­å¤´å‡½æ•°ä¸å­˜åœ¨argumentså¯¹è±¡ã€‚å¦‚æžœè¦èŽ·å–ç®­å¤´å‡½æ•°ä¼ å…¥çš„å‚æ•°å¯ä»¥ç»“åˆrestä½¿ç”¨ã€‚

5. ç®­å¤´å‡½æ•°ä¸å¯ä»¥ç”¨ä½œGeneratorå‡½æ•°ï¼Œä¹Ÿå°±ä¸å¯ä»¥åœ¨å‡½æ•°ä½“å†…ä½¿ç”¨yieldã€‚


### ç®­å¤´å‡½æ•°thisçš„å›ºå®šæ˜¯ä»€ä¹ˆå«ä¹‰ï¼Ÿ

å›ºå®š**â‘ ä»Žè‡ªå·±çš„ä½œç”¨åŸŸé“¾çš„ä¸Šä¸€å±‚ç»§æ‰¿this æˆ–è€… â‘¡thisæŒ‡å‘å®šä¹‰æ—¶æ‰€å¤„çš„ä½œç”¨åŸŸ**ã€‚æ³¨æ„ä¸æ˜¯å£°æ˜Žæ—¶å°±å›ºå®šthiså¯¹è±¡çš„å€¼ã€‚

å¦‚ä¸‹ä¾‹å­ä¸­ï¼Œç®­å¤´å‡½æ•°å¤–å±‚æ™®é€šå‡½æ•°thiså‘ç”Ÿäº†å˜åŒ–ï¼Œå®ƒä¹Ÿä¼šè·Ÿç€å˜åŒ–ã€‚ä½†å®ƒæ˜¯å›ºå®šæŒ‡å‘ä¸Šä¸€å±‚ä½œç”¨åŸŸé“¾çš„thisçš„ã€‚

```javascript

var obj = {
    a: 1,
    getA: function(){
        //æ™®é€šå‡½æ•°ï¼Œå³ä¸ä½œä¸ºå¯¹è±¡çš„å±žæ€§æ—¶ï¼Œthisä¼šæŒ‡å‘window
        var innerGet = function(){
            console.log("1", this);
            
          	(() => {
            	console.log("2", this)
            })()
            
        };
      
        innerGet();
      
        return innerGet;
    }
};

//obj.getA()()
obj.getA().apply(obj)

```
