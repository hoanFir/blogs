ğŸ¾ æµ…æ‹·è´å’Œæ·±æ‹·è´å®ç°å’Œå¸¸ç”¨æ–¹æ³•

ğŸ•˜ 2019.12.11 ç”± hoanfirst ç¼–è¾‘


åœ¨ä¸‹ä¾‹ä¸­ï¼ŒnewObj å’Œ obj äºŒè€…æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå †å­˜å‚¨åœ°å€ï¼Œå› æ­¤è¿™æ ·æ‹·è´æ˜¯ä¼šå½±å“åŸæ•°æ®çš„ã€‚

```javascript

const obj = { a: 1 };
const newObj = obj;

newObj.a = 2;

console.log(obj); //{ a: 2 }

```

**ä¸ºäº†æ‹·è´æ—¶ä¸å½±å“åŸæ•°æ®ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§æ–¹æ³•ï¼šæµ…æ‹·è´å’Œæ·±æ‹·è´ã€‚**

---

å¯¹äºä¸å«æœ‰`å¼•ç”¨ç±»å‹æ•°æ®`çš„ç®€å•æ•°ç»„æˆ–å¯¹è±¡ï¼Œåœ¨å¼€å‘ä¸­å¯ä»¥ä½¿ç”¨æµ…æ‹·è´å½¢å¼è¿›è¡Œå¤åˆ¶ï¼Œä¸å½±å“åŸæ•°æ®ã€‚

æµ…æ‹·è´å°±æ˜¯æŒ‡ï¼šä»…å¤åˆ¶ç¬¬ä¸€çº§å±æ€§åŠå…¶å€¼ï¼Œè€Œåªæœ‰å¼•ç”¨ç±»å‹æ•°æ®æ‰ä¼šäº§ç”Ÿæ·±å±‚å±æ€§ã€‚

- æµ…æ‹·è´ï¼šjså®ç°

```javascript

function shallowClone (obj) {
  let newObj = {}; //ä½¿å¾—objå’ŒnewObjä¸æŒ‡å‘åŒä¸€ä¸ªå †å­˜å‚¨æ•°æ®
  for(let i in obj) {
    newObj[i] = obj[i];
  }
}

```

- Object.assign()å±äºæµ…æ‹·è´

```javascript

//eg1
const obj = { a: 1 }; 
let newObj = Object.assign({}, obj)
newObj.a = 2;
console.log(obj); //{ a: 1 } 

//eg2
const obj = { a: { b: 1 } }; 
let newObj = Object.assign({}, obj)
newObj.a.b = 2;
console.log(obj); //{ a: { b: 2 } }

```


---


åœ¨ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬å‘ç°æµ…æ‹·è´å¯¹äºå«æœ‰å¼•ç”¨ç±»å‹æ•°æ®çš„æ•°ç»„æˆ–å¯¹è±¡çš„æ‹·è´æ˜¯ä¸å¤Ÿå½»åº•çš„ï¼Œè¿˜æ˜¯ä¼šå½±å“åŸæ•°æ®ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨æ·±æ‹·è´ã€‚

- æ·±æ‹·è´ï¼šjså®ç°

```javascript

function checkType (obj) {
  return Object.prototype.toString.call(obj);
}

function deepClone (obj) {
  let newObjClone = Array.isArray(obj) ? [] : {};

  if(checkType(obj) === "[object Object]") {
    for(let key of obj) {
      if(checkType(obj[key]) === "[object Object]" ) {
        objClone[key] = this.deepClone(obj[key]);
      } else {
        objClone[key] = obj[key];
      }
    }
  }
  return objClone; 
}

```

- æ‰©å±•è¿ç®—ç¬¦å±äºæ·±æ‹·è´

```javascript

let newObj = {...obj} 

```

- JSON.parse(JSON.Stringify(obj))å±äºæ·±æ‹·è´

```javascript

let newObj = JSON.parse(JSON.stringify(obj))

```
