ğŸ¾ å‰ç«¯å­˜å‚¨æ–¹å¼

ğŸ•˜ 2019.12.18 ç”± hoanfirst ç¼–è¾‘


å‰ç«¯å­˜å‚¨æ–¹å¼æœ‰ï¼š

1. cookie

2. localStorageã€SessionStorage

3. IndexDB

4. ...


-|å­˜å‚¨å¤§å°|æ—¶æ•ˆ|æœåŠ¡å™¨|
-|-|-|-|
cookie|æ¯ä¸ªæµè§ˆå™¨å­˜å‚¨å¤§å°ä¸åŒï¼Œä¸€èˆ¬ä¸º4k|åœ¨è®¾ç½®çš„è¿‡æœŸæ—¶é—´ä¹‹å‰ä¸€ç›´æœ‰æ•ˆ|å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯é€šè¿‡cookieä¼ é€’æ•°æ®|
localStorage|æ¯ä¸ªåŸŸåå¤§æ¦‚5MB|æ°¸ä¹…å­˜å‚¨ï¼Œé™¤éä¸»åŠ¨åˆ é™¤|ä»…å­˜å‚¨åœ¨æœ¬åœ°|
sessionStorage|æ²¡æœ‰å¤§å°é™åˆ¶|å½“æµè§ˆå™¨Tabé¡µå…³é—­å³è‡ªåŠ¨åˆ é™¤|ä»…å­˜å‚¨åœ¨æœ¬åœ°|


### ä¸€ã€Cookie

å®¢æˆ·ç«¯çš„Cookieæ˜¯å¯ä»¥å’ŒæœåŠ¡å™¨æ²Ÿé€šçš„ï¼Œå…¶æ²Ÿé€šè¿‡ç¨‹å¦‚ä¸‹ï¼š

- å½“å½“å‰åŸŸåä¸‹è¿˜æ²¡æœ‰cookieå€¼ï¼Œæµè§ˆå™¨å‘é€ä¸€ä¸ªè¯·æ±‚åˆ°æœåŠ¡å™¨
- æœåŠ¡å™¨åœ¨å“åº”å¤´çš„`set-cookie`å­—æ®µè®¾ç½®cookieå€¼ï¼Œ**ä½†æ³¨æ„ï¼Œåœ¨æŸäº›æ‰‹æœºå“ç‰Œï¼ˆå¦‚oppr r15xã€å°ç±³9ç­‰ï¼‰æ— æ³•è·å–åˆ°set-cookieå€¼ï¼Œæ‰€ä»¥éœ€è¦é¢å¤–å®šä¹‰å­—æ®µå’Œæ•°æ®ä¸€èµ·è¿”å›æœ€ä¸ºç¨³å¦¥**
- æµè§ˆå™¨å°†å…¶ä¿å­˜
- ä¹‹åçš„æ¯ä¸€ä¸ªè¯·æ±‚æµè§ˆå™¨ä¼šè‡ªåŠ¨å¸¦ä¸Šï¼Œ**ä½†æ³¨æ„ï¼Œåœ¨å¾®ä¿¡å°ç¨‹åºç­‰ä¸€äº›å¹³å°å¹¶ä¸é€‚ç”¨ï¼Œå› ä¸ºå…¶ä¸ä¼šè‡ªåŠ¨ä¿å­˜cookieï¼Œéœ€è¦æ‰‹åŠ¨ç»´æŠ¤å¹¶åœ¨è¯·æ±‚æ—¶åŠ ä¸Š**


### äºŒã€localStorage and sessionStorage

1. localStorage

```javacript

myStorage = window.localStorage;
(a Storage object which can be used to access the current origin's local storage space)

eg:
localStorage.setItem('data', 'xxx');
var res = localStorage.getItem('data');
localStorage.removeItem('data');
localStorage.clear();

```

2. sessionStorage

- a page session lasts as long as the browser is open, and survive over page reloads and restores.
- open a page in a new tab or window creates a new session with the value of the top-level browsing context, which differs  from how session cookies work.
- opening multiple tabs/windows with the same URL creates sessionStorage for each tab/window.
- closing a tab/window ends the session and clears objects in sessionStorage.

```javacript

sessionStorage.setItem('key', 'value');
var res = sessionStorage.getItem('key');
sessionStorage.removeItem('key');
sessionStorage.clear();

```

sessionStorageå¯ä»¥ç”¨æ¥æš‚æ—¶ä¿å­˜è¡¨å•å¡«å†™çš„å†…å®¹ï¼Œå³ä¸å°å¿ƒâ€œåé€€â€æˆ–â€œåˆ·æ–°â€æ—¶æ¢å¤å½“å‰é¡µçš„å¡«å†™å†…å®¹ã€‚

```javacript

//get the text field that we're going to track
let field = document.getElementById('field');

//when page is accidentally refreshed
if(sessionStorage.getItem('autosave')) {
  field.value = sessiontStorage.getItem('autosave');
}

field.addEventListener('change', function() {
  sessionStorage.setItem('autosave', field.text);
})

```
