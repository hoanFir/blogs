🐾 理解反向代理和正向代理

🕘 2019.10.18 由 hoanfirst 编辑


首先看张图：

![](https://github.com/hoanFir/blogs/blob/master/Nginx/images/%E4%BC%81%E4%B8%9A%E5%92%9A%E5%92%9A%E6%88%AA%E5%9B%BE20191118173539.png?raw=true)

从图中我们可以知道：

正向代理：代理的是客户端，服务端只认识代理；反向代理：代理的是服务端，客户端只认识代理。


### 一、正向代理

客户端是想要 A 服务端的资源，但是 A 的资源只有 B 能拿到，便可让 B 作为代理，去帮助客户端访问 A 的资源。

1.1 场景一：

在前后端分离开发中，服务器一般会先设置允许某些指定域名的请求。因此，在前端开发中，可以通过正向代理将请求从 127.0.0.1，以指定域名的形式发出请求。如某个服务器只允许 local.xy.com 域名的请求，前端脚手架默认在本地启用 127.0.0.1 的服务，此时配置 hosts 文件，`127.0.0.1 local.xy.com`，这样就实现了正向代理，可正常访问服务器资源，不会出现跨域的问题。


1.2 场景二：

科学上网也是一种正向代理。


### 二、反向代理

Nginx的服务器负载均衡(load balancers)特性就是基于反向代理来实现的。

2.1 场景一：

客户端想要访问 A 服务端 80 端口上运行的资源，但是这个资源只在 A 服务器 8089 端口上运行，为了能让客户端直接通过 80 端口访问到资源，A 便找到 B 作为代理，去帮助客户端通过访问 80 端口时转发到端口8089上。


