🐾 正则表达式入门

🕘 2019.11.22 由 hoanfirst 编辑

正则表达式，regular expressions，are patterns used to match character combination in strings.


### 一、应用

1. 防止注入

```

验证表单输入，从而保证数据的合法性

```

2. 搜索数据

```

按照某种规则，提取想要的数据

```

3. ...



### 二、RegExp in Javascript

在Javascript中，使用正则表达式可以通过RegExp对象和String对象的一些方法：

1. RegExp对象

`exec()`、`test()`

2. String对象

`match()`、`matchAll()`、`replace()`、`search()`、`split()`


在JavaScript中，创建一个regular expression有两种方法：

1. RegExp literal

```
let reg = /ab+c/

RegExp literal在加载脚本时就进行编译。如果表达式保持不变，那么使用它可以提高性能。
```

2. RegExp对象的构造函数

```
let reg = new RegExp('ab+c');

使用构造函数会在运行时编译。所以当开发者知道表达式pattern将发生更改时，或者不知道pattern需要从其他来源(例如用户输入)获取时，建议使用该方法。
```



### pattern

pattern，是RegExp最基本的元素，它们是一组描述字符串特征的字符。如：

```

^name - 该pattern匹配以"name"开头的字符串

$name - 该pattern匹配以"name"结尾的字符串

^name$ - 该patter表示精确匹配，只匹配"name"字符串

^\" - 该pattern匹配以双引号开头的字符串

[^?] - 该pattern匹配任意一个非"?"字符
  ^：^用于"[]"外表示从开头匹配，用于"[]"内表示"非"

```


### 字符簇

当要匹配如电话、地址、Email和银行卡等字符串时，用普通的基于字面的字符明显是不够的。

所以，RegExp提供了一种更自由的描述pattern的`字符簇`。如：

```

[AaEeIiOoUu] - 该pattern匹配任意一个元音字符

[a-z] - 该pattern匹配任意一个小写字母

[A-Z] - 该pattern匹配任意一个大写字母

[a-zA-Z] - 该pattern匹配任意一个字母

[0-9] - 该pattern匹配任意一个数字

[0-9\-] - 该pattern匹配任意一个数字或减号

^[a-z][0-9]$ - 该pattern匹配一个由小写字母和数字组成的字符串

^[^0-9][a-z][0-9]$ - 该pattern匹配第一个开头字符不能是数字的字符串，后续字符串为一个小写字母和数字



```

### 特殊含义的

```

. - 该pattern匹配

\s - 该pattern匹配任意一个空白字符 - [\f\n\r\t\v]
  \f: 换页符
  \n：换行符
  \r：回车符
  \t：制表符
  \v：垂直制表符
  
\S - 该pattern匹配任意一个非空白字符


\d - 该pattern匹配任意一个数字

\D - 该pattern匹配任意一个非数字

\w - 该pattern匹配任意一个非特殊字符 - [a-zA-Z0-9_汉字]

\W - 该pattern匹配任意一个特殊字符 - 非字母非数字非_非汉字


```

### 其他

```
模式“^.5$”匹配任何两个字符的、以其他非“新行”字符开头和以数字5结尾的字符串

Tips："."可以匹配任何字符串，除了空串和只包括一个"新行"的字符串（即表示除了“新行”之外的所有字符）

==正则表达式 匹配一个单词/匹配一组数字

^[a-zA-Z_]$ 该模式匹配所有的字母和下划线

^a{4}$ 该模式匹配aaaa
Tips：跟在字符或字符簇后面的花括号({})用来确定前面的内容的重复出现的次数

^a{2,4}$ 该模式匹配aa,aaa或aaaa

^a{2,}$ 该模式匹配多于两个a的字符串

^a{2,} 该模式匹配如aardvark和aaab，但apple不行

a{2,} 该模式匹配如：baad和aaa，但Nantucket不行

.{2} 该模式匹配所有的两个字符

总结：
1.	一个数字{x} 的意思是前面的字符或字符簇只出现x次
2.	一个数字加逗号 {x,} 的意思是前面的内容出现x或更多的次数
3.	两个数字用逗号分隔的数字 {x,y} 表示 前面的内容至少出现x次，但不超过y次。

==正则表达式 ?和{0, 1} 、 *和{0,} 、 +和{1,}是相等的

普通形式：

所有的正整数
^[1-9][0-9]{0,}$

所有的整数
^\-{0, 1}[0-9]{1,}$

所有的浮点数
^ [-]? [0-9]+ \. ?[0-9]+ $
Tips：
	以一个可选的负号开头、跟着一个或更多的数字、和一个小数点、再跟上一个或多个数字。

进行简化：

所有的正整数
^[1-9][0-9]*$

所有的整数
^\-?[0-9]+$

所有的浮点数
^ [-]? [0-9]+(\.[0-9]+)?$


*
{0,}

+
{1,}

?
{0,1}


```
