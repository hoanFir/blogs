1. 

执行环境，execution context，是 JavaScript 中最为重要的一个概念。

**执行环境，定义了变量或函数有权访问的其他数据，决定了它们各自的行为。**

每一个执行环境，都有一个与之关联的变量对象，variable object。


2. 

**变量对象，保存了对应的执行环境中定义的所有变量和函数。**

对于函数，会将其活动对象，activation object，作为变量对象。活动对象在最开始时只包含一个变量，即 arguments 对象。

tips：开发者在代码中无法访问这个对象，但解析器在处理数据时会在后台使用它。


3. 

**某个执行环境，执行完毕后，该环境会被销毁，保存的所有变量和函数也会随之销毁。**


### 一、全局执行环境

是最外围的一个执行环境，根据 ECMAScript 实现的宿主环境不同，表示执行环境的对象也不同。如在 Web 浏览器中是 window 对象。

全局执行幻想中定义的变量和函数，会直到应用程序退出，如关闭网页或浏览器，才会被销毁。


### 二、函数执行环境

每个函数，都有自己的执行环境，又称执行上下文，当**执行流**进入一个函数时，函数的环境就会被推入一个环境栈中，而在函数执行之后，栈就将其对应环境弹出，把控制权返回给之前的执行环境。


### 三、作用域链

作用域链，scope chain，当代码在一个环境中执行时，就会创建变量对象的一个作用域链。在当前执行环境，某个变量或函数标识符，其解析就是沿着作用域链一级一级往上搜索的过程，如果找不到标识符，通常会导致错误的发生。

更具体点说，当某个函数第一次被调用时，会创建一个执行环境，以及相应当作用域链，并把作用域链赋值给一个特殊的内部属性，即\[\[Scope\]\]，然后，使用 this、arguments 和其他命名参数的值来初始化函数的活动对象，也就是变量对象。

**作用域链，用于保证执行环境有权访问的所有变量和函数的有序访问。**内部执行环境，可以通过作用域链访问所有的外部执行环境，反之不行，这些环境之间的联系是线性的、有次序的。

作用域链的前端，始终都是当前执行环境对应的变量对象；作用域链的下一个变量对象，来自外部执行环境；而再下一个，来自再下一个外部执行环境...；直至全局执行环境，因此作用域链的最后一个对象，始终都是全局执行环境对应的变量对象。

tips：函数参数也被当作变量来对待，因此其访问规则与当前执行环境中的其他变量相同。


### 四、延长作用域链

对于有些语句，可以在作用域链的前端，临时添加一个变量对象。该变量对象会在代码执行完毕被移除，如 try-catch 语句中的 catch 块。

对 try-catch 中的 catch 语句来说，**会创建一个新的变量对象，其中包含的是被抛出的错误对象的声明**。


