
```
ECMAScript 版本提案：

strawman(最初想法的提交)、

proposal(由技术委员会至少一名成员倡导的正式提案文件)、

draft(功能规范的初始版本草案)、

candidate(提案规范通过审查并从厂商那收集反馈)、

finished(提案准备加入ECMAScript，但浏览器或nodejs实现还不一定)

```

### 一、Arrows

Arrows are a function shorthand using the `=>` syntax.

Arrows share the same lexical `this` as their surrounding code. So if an  arrow is inside another function, it shares the "arguments" variable of its parent function.

也就是说，箭头函数本身没有 `this`，其继承所处的外部函数。


```javascript

//1
//expression bodies
var odds = evens.map(v => v+1);
var nums = evens.map((v, i) => v + i);

//2
//statement bodies
nums.forEach(v => {
  if(v % 5 === 0) {
    fives.push(v);
  }
});

//3
//lexical this
var bob = {
  _name: "bob",
  _friends: [],
  printFriends() {
    this._friends.forEach(f => {
      console.log(this._name + ' knows' + f);
    });
  }
}

//4
//lexical arguments
function square () {
  let example = () => {
    let numbers = [];
    for(let number of arguments) {
      numbers.push(number * number);
    }
    
    return numbers;
  };
  
  return example();
}

```


### 二、Classes

JavaScript 的类是一个基于原型的面向对象模型，prototype-base OO，的语法糖。

To have a single convenient declarative form makes class patterns easier to use.

类支持：prototype-based inheritance, super calls, instance, static methods, constructors.


```javascript

class SkinnedMesh extends THREE.Mesh {
  constructor(geometry, materials) {
    super(geometry, materials);
    
    this.idMatrix = SkinnedMesh.defaultMatrix();
    this.bones = [];
    this.boneMatrices = [];
  }
  
  update(camera) {
    //...
    super.update();
  }
  
  //static 方法只能由当前类来访问
  static defaultMatrix() {
    return new THREE.Matrix4();
  }
}

```

### 三、对象字面量扩展

支持：setting the prototype at construction, shorthand for `foo: foo` assginments, defining methods and making super calls, computed (dynamic) property names.

```javascript

var foo = 1, theProtoObj, somethingElse;

var obj = {

  //1
  //sets the prototype
  __proto__: theProtoObj,
  
  //2
  //duplicate __proto__ properties
  ['__proto__']: somethingElse,
  
  //3
  //shorthand for 'foo: foo'
  foo,
  
  //4
  //super calls
  toString() {
    return "d " + super.toString();
  },
  
  //5
  //computed (dynamic) property names
  ["prop_" + (() => 42)()]: 42
}

```

### 四、模板字符串

template strings, provide syntactic sugar for constructing strings.

```javascript

//1
//basic template string creation
`this is a template string`

//2
//multiline strings
`in ecmascript 5 this is
not legal.`

//3
//interpolate variable bindings
var name = 'test';
`hello, ${name}`;

//4
//unescape template strings
String.raw`In ecmascript 5 "\n" is a line-feed.`
//String.raw() 是唯一一个内置的模板字符串的标签函数，tag function，用来获取一个模板字符串的原始字符串的，且任何类型的转义形式都会失效。通常不需要把它看成一个普通函数，你只需要把它放在模板字符串前面就可以了，而不是在它后面加个括号和一堆参数来调用它，引擎会替你去调用它。

```

### 五、解构赋值

Restructuring, allows binding using pattern matching, with support for matching arrays and objects.

```javascript

//1
//list matching
var [a, b] = [1, 2, 3];
a === 1
b === 3;

//2
//object matching
var test = {
  a: "a",
  b: "b"
}
var {
  a: 1, //default value === 1
  b: { ba: 2 },
  c: 3
} = test;
a = "a"
b = "b"
c = 3

//3
//can be used in parameter position
function g({name: x}) {
  console.log(x);
}
g({name: 5});

//4
//destructuring + defaults arguments
function r({x, y, z = 10}) {
  ...
}
r({x:1, y:2});

//5
//fail-soft feature
var [a] = [];
a === undefined

var [b=1] = [];
b === 1

```









