🐾 web应用安全

🕘 2019.11.23 由 hoanfirst 编辑


### web应用安全现状

由于web应用环境包括多个系统，许多支持系统没有得到恰当的保护，而且大部分运行于internet，因此具有非常广的攻击面。

另外，在web应用的运行中，具有更多的临时决策，以支持系统的运行，系统状态具有更多的可变性。

### web应用安全框架类别和漏洞示例

类别|desc|简单的漏洞示例|
-|-|-|
输入和数据验证|如何知道应用程序接收的输入是有效且安全的呢？输入验证是指应用程序在进行其他处理之前如何筛选、删除或拒绝输入|在html输出流中使用未经验证的输入、使用未经验证的用于生成SQL查询的输入、使用输入文件名或URL或用户名进行的安全决策、对于恶意输入只使用引用程序筛选器...|
身份验证|您是谁？身份验证是一个实体验证另一个实体身份的过程，通常通过凭据进行，例如用户名和密码|使用较弱的密码、在配置文件中存储明文凭据、通过网络传递明文凭据、允许越权账户、允许延长的会话周期、将个人设置和身份验证混合...|
授权|您可以做什么？授权是应用程序提供对资源和操作的访问控制的方式|依赖单一网关、无法根据应用程序标识锁定系统资源、无法限制对制定存储过程的数据库访问、使用不合适的权限分离...|
配置管理|用程序以谁的身份运行？它连接到哪个数据库？如何管理应用程序？如何保护这些设置？配置管理指的是应用程序如何处理这些操作问题|使用不安全的管理界面、使用不安全的配置存储、存储明文配置数据、拥有太多管理员、使用越权进程账户和服务账户...|
敏感数据|应用程序如何处理敏感数据？敏感数据是指您的应用程序如何处理必须受到保护的所有数据，不管数据是在内存中、网络上还是永久性存储中|在不需要时存储机密信息、在代码中存储机密信息、以明文形式存储机密信息、在网络上以明文形式传递敏感数据...|
会话管理|应用程序如何处理和保护用户会话？会话是指用户与您的 Web 应用程序之间的一系列相关交互|通过未加密的信道传递会话标识符、允许延长的会话周期、拥有不安全的会话状态存储、在查询字符串中放置会话标识...|
加密|如何保持机密（保密性）？如何防止他人篡改您的数据或库（完整性）？如何为必须具有很强机密性的随机值提供种子？加密是指应用程序保证机密性和完整性的方式|使用自定义加密、使用的算法不正确、使用的密钥长度太短、无法保护加密密钥、在延长的时间内使用同一密钥、以不安全的方式分配密钥...|
参数操作|应用程序如何操作参数值？对于应用程序，表单域、查询字符串参数和 cookie 值经常作为参数使用。参数操作既指应用程序保护这些值不被篡改的方式，也指应用程序处理输入参数的方式|无法验证所有输入参数、在未加密的cookie中存储敏感数据、在查询字符串和表单域中存储敏感数据、信任http表头信息、使用无保护的视图状态...|
异常管理|当应用程序中的一个方法调用失败时，您的应用程序会做什么？显示了多少？您是否将错误信息友好地返回给最终用户？您是否将有价值的异常信息传递给调用方？应用程序的失败方式是否友好？|无法使用结构化异常处理、显示太多的信息（如java error）给客户端...|
审核与记录|谁在什么时候做了什么？审核与记录是指应用程序记录与安全相关的事件的方式|无法审核失败的登录、无法保护审核文件、无法跨应用程序层进行审核...|

具体[web应用程序安全框架的威胁或攻击、对策](https://github.com/hoanFir/blogs/blob/master/Web%E5%AE%89%E5%85%A8/%E5%B8%B8%E8%A7%81%E7%9A%84Web%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98.md)


### 微软web应用安全框架

1. 第一步：web应用威胁建模

1.1 目的：确定方案中的相关威胁和漏洞，以帮助您构建应用程序的安全设计。

1.2 **输入**：主要用例和使用方案、数据流、数据架构、部署关系图。

1.3 **输出**：威胁列表、漏洞列表。

1.4 五个步骤：

（重点：重复执行步骤2和步骤5来逐步细化威胁模型）

![](https://github.com/hoanFir/blogs/blob/master/Web%E5%AE%89%E5%85%A8/images/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-11-23%20%E4%B8%8B%E5%8D%883.42.26.png?raw=true)

```

步骤一：identify security objectives，确定安全目标

  目标清晰有助于将注意力集中在威胁建模活动上，以及确定后续步骤要做多少工作。  

步骤二：application overview，创建应用程序概述

  逐条列出应用程序的重要特征和参与者有助于在步骤 4 中确定相关威胁。 

步骤三：decompose application，分解应用程序

  全面了解应用程序的结构可以更轻松地发现更相关、更具体的威胁。 

步骤四：identify threats，确定威胁

  使用步骤 2 和 3 中的详细信息来确定与应用程序方案和上下文相关的威胁。 

步骤五：identify vulnerabilities，确定漏洞

  检查应用程序的各层以确定与威胁有关的弱点。使用漏洞类别来帮助关注最常出现错误的区域。 

```
