



## 一、为什么不直接使用web单线程模型

经常有人问到这样一个问题：“微信小程序与 Web 页面在技术层面的主要区别是什么？”我相信你也有类似的困惑，因为在编程语言和编程习惯上，小程序开发与 Web 前端开发非常相似，比如都用 JavaScript 语言、与 HTML/CSS 非常相似的 WXML/WXSS 等，**可它却没有直接用原生的前端技术**，而是单独自己做了一套。

这个问题的根源在于：**与 Web 网站相比，以微信为宿主的小程序更需要考虑安全、性能等因素，因为要考虑小程序不会对微信产生安全隐患，同时要尽量达到接近原生应用的用户体验**。这也是为什么小程序不直接用浏览器的线程模型，非要自己弄一套双线程模型最主要的两个原因。

## 二、那什么是小程序的双线程模型呢？

要理解这个问题，你先要对浏览器的线程模型有一定的了解，因为理解一个新概念或技术的最好的方法就是给它一个参照物，可以通过阅读[event-loop理解](https://github.com/hoanFir/blogs/blob/master/JavaScript%20%E5%9F%BA%E7%A1%80/event-loop%E7%90%86%E8%A7%A3.md)学习浏览器进程和线程模型。要注意，JavaScript 语言的单线程不能理解为“浏览器单线程”，浏览器内部架构很复杂，只不过在处理 GUI 渲染线程和 JavaScript 逻辑脚本线程上用了互斥、阻塞的管理模式，让一些开发者产生了误解罢了。
