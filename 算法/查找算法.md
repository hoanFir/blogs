🐾 查找算法

🕘 2019.02.28 由 hoanfirst 编辑


## 第一部分

> 原文：《吴军的谷歌方法论》-如何有效地找到一个目标


### 一、编址

第一个概念，addressing, 编址。简单地说，在计算机里，所有的东西都被编了号，包括一个个内存、接口和设备，对于这些编号，还可以广义地称之为地址。

为什么编号这件事很重要？其导致了计算机做事情和人类有什么不同？

对于人类来说，人会根据特点进行描述和区分，也就是说人类区分个体是通过人和物与其他东西明显不同的特质实现的。这种区分和查找目标的习惯沿用至今。比如：“拿一下客厅茶几上的白色的盒子”。

但是，计算机做这种简单的事情方法却不同。比如：“拿一下第三个房间第六个家具第一个位置的东西”。

从上述例子，可以看到计算机和人类的行为有两点不同：

- 编号代替了实际的对象

- 如果人记错了，计算机拿来的不是想要的，就会出现系统宕机的情况


### 二、为什么需要编号

最早的计算机，无论是算盘，还是帕斯卡的计算器，都没有编号概念。

编号始于图灵。

在图灵之前，大家都用计算机（机械的或继电器的）计算一件事就完了，很难让它做复杂的事情。

图灵不满足于让计算机只做一种特定的计算，而要让它通过计算来实现一些复杂的功能。**注意，以前的人把计算当作目的，图灵把计算当作来手段，实现功能才是目的。**

为了实现复杂的功能，对机器来说，最简单的办法是把所有要计算的对象（比如数据）都编号。在图灵机模型中，所用的数字都放在一个个编了号（地址）的格子里。计算机对于数据的操作，都是先找数据所在的地址，然后把数据拿出来处理，处理完的内容再放回到某个地址中。

编号的好处就是可以用一个数学模型把计算机这个机器描述清楚。这就如同可以用变量 x, y, z 把一个数学公式描述清楚一样。


### 三、查找

查找，Search，在计算机中根据一个东西的特征找到它的地址，得到了具体的地址后，计算机才好访问（Access）里面的具体内容。

当东西的数量很多时，查找就要遵循一些方法了，否则找东西的效率非常低。

#### 3.1 对于人类来说，有什么查找方法？

- 顺序查找

依次按顺序扫描。这种方法看似慢，但这是人能够最快做到的，因为如果随机来回乱找会不得要领。

这个笨办法在计算机软件中还会时不时地用到。

- 字典查找法

查字典的人不用一页一页去翻，而是估计所要查的字在哪页，再在那页附近查找，使用字典的时间长了后，查字典的速度会提高。

**注意，对于这个情况，它比二分查找法更快。**


#### 3.2 对于计算机来说，采用什么类似的方法？

- 顺序查找

虽然该方法对于计算机来说是笨办法，但在一些场景下依然在使用。比如替换一篇文章的所有出现“谷歌”这个词的内容。

- 二分查找

这其实是字典查找的变种。

因为计算机中的字典只有两个字母，0和1，所以称为二分查找。

举例来说，让A在1~1000里找到B心中想的数字，只要问10次以内，就可以知道，因为每次折半，而2^10=1024>1000。又比如13亿人，要找到数据库中某个身份证号的位置，只需要比较31次以内。


### 四、二分查找

二分查找，Binary Search。

对于计算机的二分查找，有一个前提：

- 要求所有的数据是事先排好序的，而排序是有成本的

相比查找，排序的速度要慢得多。

因此，要根据具体情况来决定是否要用二分查找法。**如果只对数据进行一次查找，显然事先排序就不合算了，只有当查找的次数够多，通过次数抵消边际成本，为此花一些时间排序才合算。**当然，这个场景有个前提，就是数据是静态的，比如公司的历史营收数据，一旦形成不能修改，这时候对他们进行排序就有效果。但遗憾的是，在大部分现实生活中，数据总是在变化的，比如公司员工入职和离职。

当然，对于非静态的数据，还是有办法做到利用原来数据有序的特点，动态调整新数据的，从而让每次排序所做的工作不会太多，就是有关堆（堆排序/最大堆/最小堆）的概念。


## 第二部分

> 原文：《吴军的谷歌方法论》-谷歌如何在一毫秒内找到你想要的上百万份文档？


### 一、计算机针对大量数据的索引查找

首先，在处理非常大量的数据时，顺序查找和二分查找都显得力不从心。

场景：

```
1.找出北京市所有叫“李强”的人

假设，在北京市有2000多万人口，会有3000～4000个李强。

如果使用顺序查找，显然不可取。

如果使用二分查找，即需要将所有人按姓名进行排序，假定北京人口没有变动，是静态的，那么此时通过二分查找，只需要25次查找就能找到一个李强。但是，这只是找到一个，由于找到了一个李强，就可以知道其他李强要么在他前面，要么在他后面，接下来用顺序查找的方法，往前找一遍，再往后找一遍，这样大概需要查看3000～4000次，才可以把所有李强找到。





```

计算机里的索引，其实和很多图书最后附带的关键词索引非常类似。在图书的关键词索引中，会列举出主要关键词在书中的位置，比如索引可以告诉你“计算机”一词出现在书中第2~5页、8~10页、33页。

而对于计算机，要找到北京所有叫“李强”的人，可以先把北京市户籍数据库中的每个人名的记录编号，相当于书中的页码，再通过人名索引，即索引的每一行是一个名字，后面是叫这个名字的所有人的记录编号。比如叫“李强”名字的人的记录都放在数据库中编号第2,013,210~1,026,902之间，这样只要先在索引中找到李强这一行，然后根据索引的指示，到数据库中直接调出这个区间的记录即可。

那么，建立索引具体有什么好处？

1. 当一个数据库有了索引，其实不需要进行排序，也可以快速查找到所需要的信息。比如上例中并不需要把所有叫李强的记录都放在一个区域，只要索引指示中一一列出所有位置的各自记录也可。

2. 由于不需要排序还能快速查找目标，这样当数据库不断变动时，维护数据库的成本非常低。因为要维持一个数据库有序，成本是很高的。

3. 对于新需求，比如要找到在某个学校毕业的的人，只需要建立一个新索引即可。

4. 还可以结合多个索引进行查找。比如要找到在清华大学毕业的李强，可以先在“人名索引”中找到所有的李强，再从“毕业学校索引”找到叫李强的人，重合的记录号，就是那些从清华毕业的李强。


建立索引，也是Google搜索为什么那么快的原因。
